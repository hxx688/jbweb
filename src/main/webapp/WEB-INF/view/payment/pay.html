<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,user-scalable=0">
    <title>鸿宝财富</title>
    <link rel="stylesheet" href="//cdn.bootcss.com/weui/1.1.1/style/weui.min.css">
    <link rel="stylesheet" href="${ctxPath}/static/lfgj/weui2.css">
    <link rel="stylesheet" href="${ctxPath}/static/style/css/pay.css">
    <script src="${ctxPath}/static/jquery/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="${ctxPath}/static/layer/layer.js"></script>

    <script type="text/javascript">
        $(function() {
            var code = "${code}";
            if (code == "0") {
            } else if (code == "1") {
                layer.msg("${msg}",{
                    shift : 6
                });
            }
        })
    </script>
</head>

<body>
<form name="payForm" action="${ctxPath}/payment/toPay" method="post">
    <input type="hidden" name="person_id" value="${person.crypt_id!}"/>
    <input type="hidden" name="payWay" id="payWay" value="8"/>
    <input type="hidden" name="payModel" id="payModel" value=""/>
    <input type="hidden" name="payCode" id="payCode" value=""/>
    <div class="page" style="padding-left:30%;padding-right:30%;">
        <header class='demos-header'>
            <h1 class="demos-title"></h1>
            <p class='demos-sub-title'>鸿宝-${person.real_name!}</p>
        </header>
        <div class="weui-cells bd">
            <div class="weui-cell">
                <div class="weui-cell__hd">
                    <label class="weui-label">帐号:</label>
                </div>
                <div class="weui-cell__bd">
                    ${person.mobile}
                </div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__hd">
                    <label class="weui-label">余额:</label>
                </div>
                <div class="weui-cell__bd">
                    ${person.amount}
                </div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__hd">
                    <label class="weui-label">金额(￥)</label>
                </div>
                <div class="weui-cell__bd">
                    <input class="weui-input" type="number" id="money1" name="total_fee"
                           name="total_fee" placeholder="请输入金额" />
                </div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__hd">
                    <label class="weui-label">备注</label>
                </div>
                <div class="weui-cell__bd">
                    <input class="weui-input" type="text" id="remark" name="remark"
                           placeholder="请输入备注" />
                </div>
            </div>
        </div>
        <div class="weui-cells__title">支付方式</div>
        <div class="weui-cells weui-cells_radio">

            <label class="weui-cell weui-check__label" for="payWay7">

                <div class="weui-cell__bd">
                    <img src="${ctxPath}/static/style/images/shanpay.png" alt=""
                         style="width: 30px; margin-right: 5px; vertical-align: middle;">通道一(网银)
                </div>
                <div class="weui-cell__ft">
                    <input type="radio" name="payWay" class="weui-check" id="payWay7" value="yida_bank" />
                    <span class="weui-icon-checked"></span>
                </div>
            </label>

            <label class="weui-cell weui-check__label" for="payWay8">

                <div class="weui-cell__bd">
                    <img src="${ctxPath}/static/style/images/shanpay.png" alt=""
                         style="width: 30px; margin-right: 5px; vertical-align: middle;">通道一(快捷)
                </div>
                <div class="weui-cell__ft">
                    <input type="radio" name="payWay" class="weui-check" id="payWay8" value="yida_easy" />
                    <span class="weui-icon-checked"></span>
                </div>
            </label>


            <label class="weui-cell weui-check__label" for="payWay9">

                <div class="weui-cell__bd">
                    <img src="${ctxPath}/static/style/images/shanpay.png" alt=""
                         style="width: 30px; margin-right: 5px; vertical-align: middle;">通道二(快捷)
                </div>
                <div class="weui-cell__ft">
                    <input type="radio" name="payWay" class="weui-check" id="payWay9" value="shoufu|kuaijie" />
                    <span class="weui-icon-checked"></span>
                </div>
            </label>

            <label class="weui-cell weui-check__label" for="payWay10">

                <div class="weui-cell__bd">
                    <img src="${ctxPath}/static/style/images/shanpay.png" alt=""
                         style="width: 30px; margin-right: 5px; vertical-align: middle;">通道二(网银)
                </div>
                <div class="weui-cell__ft">
                    <input type="radio" name="payWay" class="weui-check" id="payWay10" value="shoufu|bank" />
                    <span class="weui-icon-checked"></span>
                </div>


            </label>

            <div id="shoufu_banklist" style="display:none;">
            <!-- test -->
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g1" value="ICBC" type="radio">
                <label for="g1">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>工商银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g2" value="ABC" type="radio">
                <label for="g2">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>农业银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g3" value="BOCSH" type="radio">
                <label for="g3">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>中国银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g4" value="CCB" type="radio">
                <label for="g4">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>建设银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g5" value="CMB" type="radio">
                <label for="g5">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>招商银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g6" value="SPDB" type="radio">
                <label for="g6">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>浦发银行</p></div>
                </label>
            </div>


            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g7" value="GDB" type="radio">
                <label for="g7">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>广发银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g8" value="BOCOM" type="radio">
                <label for="g8">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>交通银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g9" value="PSBC" type="radio">
                <label for="g9">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>邮政储蓄</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g10" value="CNCB" type="radio">
                <label for="g10">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>中信银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g11" value="CMBC" type="radio">
                <label for="g11">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>民生银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g12" value="CEB" type="radio">
                <label for="g12">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>光大银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g13" value="HXB" type="radio">
                <label for="g13">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>华夏银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g14" value="CIB" type="radio">
                <label for="g14">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>兴业银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g15" value="BOS" type="radio">
                <label for="g15">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>上海银行</p></div>
                </label>
            </div>

            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g16" value="SRCB" type="radio">
                <label for="g16">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>上海农商</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g17" value="PAB" type="radio">
                <label for="g17">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>平安银行</p></div>
                </label>
            </div>
            <div class="weui-form-li iblock">
                <input class="weui-form-checkbox" name="f2" id="g18" value="BCCB" type="radio">
                <label for="g18">
                    <i class="weui-icon-radio"></i>
                    <div class="weui-form-text"><p>北京银行</p></div>
                </label>
            </div>

            </div>
            <!-- end -->

            <label class="weui-cell weui-check__label" for="payWay11">

                <div class="weui-cell__bd">
                    <img src="${ctxPath}/static/style/images/shanpay.png" alt=""
                         style="width: 30px; margin-right: 5px; vertical-align: middle;">码支付(支付宝)
                </div>
                <div class="weui-cell__ft">
                    <input type="radio" name="payWay" class="weui-check" id="payWay11" value="mazhifu|1" />
                    <span class="weui-icon-checked"></span>
                </div>
            </label>

        </div>
        <div class="bd">
            <div class="weui-btn-area">
                <button onClick="return toPay()" class="weui-btn weui-btn_primary">确定支付</button>
            </div>
        </div>
    </div>
</form>
</body>

<script type="text/javascript">

    // ********* test ********


    // ********* test end  ********

    $(function(){

        $(".weui-check").change(
            function() {
                var id = $("input[name='payWay']:checked").val();
                if (id == "shoufu|bank") {
                    $("#shoufu_banklist").show();
                }else {
                    $("#shoufu_banklist").hide();
                }
            });
    });

    function toPay(){
        var payWay = $("input[name='payWay']:checked").val();
        $("#payModel").val(payWay);
        var remark = $("#remark").val();
        var total_fee = $.trim($("#money1").val());

        if(payWay == "yida_bank" || payWay == "yida_easy" ) {
            $("#payWay").val(9);
        }
        if(payWay.indexOf("|") != -1) {
            var strs = payWay.split("|");
            if(strs[0] == "shoufu"){
                $("#payWay").val(10);
                $("#payModel").val(strs[1] );

                if(strs[1] == "bank") {
                    var payBank = $("input[name='f2']:checked").val();
                    if (typeof payBank == "undefined" || payBank == "") {
                        layer.msg("请选择银行支付");
                        return false;
                    }

                    $("#payCode").val(payBank);
                }
            }else if(strs[0] == "mazhifu"){
                $("#payWay").val(11);
                $("#payModel").val(strs[1] );
            }
        }

        if(total_fee == ""){
            layer.msg("金额不能为空",{
                shift : 6
            });
            return false;
        }else{
            document.forms['payForm'].submit();
        };

    };

    /*
    function toPay(){
        var payWay = $("input[name='payWay']:checked").val();
        var remark = $("#remark").val();
        var total_fee = $.trim($("#money1").val());
        if(total_fee == ""){
             layer.msg("金额不能为空",{
                 shift : 6
             });
            return;
        };

        $.post("${ctxPath}/payment/toPay", {
            total_fee : total_fee,
            remark :　remark,
            payWay : payWay,
            person_id : "${person.crypt_id!}"
        }, function(res) {
            if (res.code == 0) {
                var path = res.data;
                window.location.href = path;
            }else if (res.code == 1) {
                layer.msg(res.message,{
                     shift : 6
                });
            }else {
                 layer.msg(res.message, {
                     shift : 6
                });
            };
        }, "json");
    };
    */

</script>
</html>